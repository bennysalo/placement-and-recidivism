---
title: "Create pertinent subgroups"
output: pdf
date: 2018-02-12
---
Load needed packages

```{r}
library(tidyverse)
sessionInfo()
```

Import dataset 'FinPrisonMales'. This version of the data includes only males. Data is not publicly available. Check https://osf.io/e9dzf/ for a description of the data, including inclusion and exclusion criteria and summary statistics. (This description will be uploaded at a later date - it is not yet avaialable as of 2018-02-19.)

```{r}
rm(list = ls())
FinPrisonMales <- 
  readRDS("C:/Users/benny_000/Dropbox/AAAKTUELLT/FinPrisonData/FinPrisonMales.rds")
```


Create new variables. MatchIt needs dichotomous response variables. 

```{r}
FinPrisonMales <-
  FinPrisonMales %>%
  mutate(open01 = ifelse(openPrison == "open_prison", 1, 0),
         cond01 = ifelse(conditionalReleaseGranted == "cr_granted", 1, 0),
         superv01 = ifelse(supervisedParole == "supervised parole", 1, 0))
         # oc_violent = ifelse(o_assault == 0 & o_homicide == 0, 0, 1),
         # newOc_violent = ifelse(newO_assault == 0 & newO_homicide == 0, 0, 1))
```


Exclude individuals who comitted a crime during the sentence. This is the simplest way to handle the issue that we do not know when the crime was committed or when it was uncovered.

```{r}
included_sample <-
  FinPrisonMales %>% 
  filter(crimeDuringSentence == "No records of crime")

rm(FinPrisonMales)
```


Also, exclude individuals with suspended conditional release. This is the easiest way to handle the confounding that individuals granted conditional release from open prison may have been placed in closed prison if the conditional release was revoked.


```{r}
included_sample <-
  included_sample %>% 
  filter(conditionalReleaseOutcome != "Cancelled conditional release")

```

This leaves us with the following breakdown of individuals.
```{r}
table(included_sample$openPrison, included_sample$conditionalReleaseOutcome)
```

Further we seperate those with their parole supervised and those without supervision.

```{r}
table(included_sample$supervisedParole, included_sample$conditionalReleaseOutcome, included_sample$openPrison)
```

The smallest groups (individuals placed in closed prison and not granted conditional release) will not be examined further. That leaves us with the possiblity to examine 
- the effect of placement among those not granted conditional release
- the effect of conditional release among those placed in open prison at the end of their sentence.

