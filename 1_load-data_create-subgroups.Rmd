---
title: "Create pertinent subgroups"
output: pdf
date: 2018-02-12
---


```{r}
library(tidyverse)
```

Import data with only males

```{r}
rm(list = ls())
FinPrisonMales <- 
  readRDS("C:/Users/benny_000/Dropbox/AAAKTUELLT/FinPrisonData/FinPrisonMales.rds")
```

Create new variables. MatchIt needs dichotomous response variables. 

```{r}
FinPrisonMales <-
  FinPrisonMales %>%
  mutate(open01 = ifelse(openPrison == "open_prison", 1, 0),
         cond01 = ifelse(conditionalReleaseGranted == "cr_granted", 1, 0),
         superv01 = ifelse(supervisedParole == "supervised parole", 1, 0))
         # oc_violent = ifelse(o_assault == 0 & o_homicide == 0, 0, 1),
         # newOc_violent = ifelse(newO_assault == 0 & newO_homicide == 0, 0, 1))
```


Exclude individuals who comitted a crime during the sentence. This is the simplest way to handle the issue that we do not know when the crime was committed or when it was uncovered.

```{r}
included_sample <-
  FinPrisonMales %>% 
  filter(crimeDuringSentence == "No records of crime")

rm(FinPrisonMales)
```


Also, exclude individuals with suspended conditional release. This is the easiest way to handle the confounding that individuals granted conditional release from open prison may have been placed in closed prison if the conditional release was revoked.


```{r}
included_sample <-
  included_sample %>% 
  filter(conditionalReleaseOutcome != "Cancelled conditional release")

```


```{r}
table(included_sample$openPrison, included_sample$conditionalReleaseGranted)
table(included_sample$openPrison, included_sample$conditionalReleaseOutcome)

table(included_sample$supervisedParole, included_sample$conditionalReleaseOutcome, included_sample$openPrison)
```


